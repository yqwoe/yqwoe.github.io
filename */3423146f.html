<!DOCTYPE html><html><head><meta charset="utf-8"><title>å‰ç«¯å®šæ—¶å™¨ | rm -rf /*</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico"><link rel="mask-icon" href="{{ url_for(theme.favicon.safari_pinned_tab) }}" color="{{ theme.android_chrome_color }}"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/search.css"><link rel="stylesheet" href="/css/katex.min.css"><link rel="stylesheet" href="/css/googleapis.css"><link rel="stylesheet" href="/css/highlight.css"><meta name="description" content="å‰ç«¯å¼€å‘ä¸­ï¼Œä¼šç»å¸¸æ¥åˆ°å®šæ—¶å™¨çš„éœ€æ±‚ï¼Œå€’è®¡æ—¶ã€è®¡æ—¶å™¨ã€åŠ¨ç”»æ•ˆæœã€‚"><meta property="og:type" content="article"><meta property="og:title" content="å‰ç«¯å®šæ—¶å™¨"><meta property="og:url" content="https://rm-rf.ink/*/3423146f.html"><meta property="og:site_name" content="rm -rf &#x2F;*"><meta property="og:description" content="å‰ç«¯å¼€å‘ä¸­ï¼Œä¼šç»å¸¸æ¥åˆ°å®šæ—¶å™¨çš„éœ€æ±‚ï¼Œå€’è®¡æ—¶ã€è®¡æ—¶å™¨ã€åŠ¨ç”»æ•ˆæœã€‚"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2024-01-11T07:09:31.000Z"><meta property="article:modified_time" content="2024-01-15T03:34:01.469Z"><meta property="article:author" content="Yq Woe"><meta property="article:tag" content="vue"><meta property="article:tag" content="react"><meta property="article:tag" content="javascript"><meta property="article:tag" content="typescript"><meta property="article:tag" content="setTimeout"><meta property="article:tag" content="setInterval"><meta property="article:tag" content="requestAnimationFrame"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/reveal.css"><meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="rm -rf /*" type="application/atom+xml">
</head><body><div id="wrapper"><header id="header"><div class="poem-wrap"><div class="poem-border poem-left"></div><div class="poem-border poem-right"></div><h1><a href="/">rm -rf /*</a></h1><p id="poem">åŠ è½½ä¸­...</p><p id="info"></div><nav><a class="nav-link" href="/">é¦–é¡µ</a> <span class="nav-spacer">x</span> <a class="nav-link" href="/categories">åˆ†ç±»</a> <span class="nav-spacer">x</span> <a class="nav-link" href="/tags">æ ‡ç­¾</a> <span class="nav-spacer">x</span> <a class="nav-link" href="/about">å…³äº</a></nav></header><div id="content"><article id="post-å‰ç«¯å®šæ—¶å™¨" class="article article-type-post" itemprop="blogPost" itemscope><div class="article-inner"><header class="article-header"><h2 class="article-title" itemprop="headline name">å‰ç«¯å®šæ—¶å™¨</h2><div class="article-meta"><time class="article-date" datetime="2024-01-11T07:09:31.000Z" itemprop="datePublished">2024.01.11 15:09 ä¸‹åˆ</time></div></header><div class="article-entry" itemprop="articleBody"><div id="toc" class="toc-article"><div class="toc-title">ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-text">1.å®šæ—¶å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-settimeout"><span class="toc-text">1.1. setTimeout</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-setinterval"><span class="toc-text">1.2. setInterval</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-requestanimationframe"><span class="toc-text">1.3. requestAnimationFrame</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E6%A0%87%E7%AD%BE%E5%8A%A8%E7%94%BB"><span class="toc-text">2. æ ‡ç­¾åŠ¨ç”»</span></a></li></ol></div><p>â€ƒâ€ƒå‰ç«¯å¼€å‘ä¸­ï¼Œä¼šç»å¸¸æ¥åˆ°<code>å®šæ—¶å™¨</code>çš„éœ€æ±‚ï¼Œ<code>å€’è®¡æ—¶</code>ã€<code>è®¡æ—¶å™¨</code>ã€<code>åŠ¨ç”»æ•ˆæœ</code>ã€‚</p><span id="more"></span><p>â€ƒâ€ƒåœ¨<code>åšå®¢</code>- <a href="/tags">æ ‡ç­¾</a>é¡µé¢ä¸­ä½¿ç”¨åˆ°äº†<code>å®šæ—¶å™¨</code>æ¥åš<code>::hover</code>åŠ¨ç”»æ•ˆæœã€‚æ¥ä¸‹æ¥æˆ‘ä¼šå¯¹æ¯”ä¸€ä¸‹<code>setTimeout</code>ã€<code>setInterval</code>ã€<code>requestAnimationFrame</code>æ¥å®ç°å®šæ—¶å™¨ã€‚</p><div style="display:flex;justify-content:center"><div><video width="100%" height="auto" src="/images/video/tags-view.mp4" autoplay muted loop></video><div style="text-align:center;user-select:none">è§†é¢‘ï¼š åšå®¢-æ ‡ç­¾</div></div></div><h1 id="1å®šæ—¶å™¨"><a class="markdownIt-Anchor" href="#1å®šæ—¶å™¨"></a> 1.å®šæ—¶å™¨</h1><h2 id="11-settimeout"><a class="markdownIt-Anchor" href="#11-settimeout"></a> 1.1. setTimeout</h2><p>â€ƒâ€ƒ<strong>setTimeoutæ˜¯JavaScriptä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåœ¨æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´åæ‰§è¡Œä¸€æ®µä»£ç æˆ–å‡½æ•°ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯åœ¨æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´åï¼Œå°†ä»£ç æˆ–å‡½æ•°æ”¾å…¥JavaScriptçš„äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…å½“å‰ä»£ç æ‰§è¡Œå®Œæ¯•åå†æ‰§è¡Œã€‚</strong></p><p><strong>setTimeoutçš„è¯­æ³•å¦‚ä¸‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>||<span class="string">&#x27;func()&#x27;</span>,delay,[args...])</span><br></pre></td></tr></table></figure><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ul class="lvl-0"><li class="lvl-2"><p><code>func|code</code>ï¼šè¦æ‰§è¡Œçš„å‡½æ•°æˆ–ä»£ç ã€‚</p></li><li class="lvl-2"><p><code>delay</code>ï¼šå»¶è¿Ÿæ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</p></li><li class="lvl-2"><p><code>arg1, arg2, ...</code>ï¼šå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ã€‚</p></li></ul><p>â€ƒâ€ƒå½“ä½¿ç”¨setTimeoutæ—¶ï¼Œå®ƒå°†åœ¨æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´åæ‰§è¡Œä¸€æ¬¡å‡½æ•°æˆ–ä»£ç ï¼Œç„¶åè¿”å›ä¸€ä¸ªå®šæ—¶å™¨IDï¼Œå¯ä»¥ä½¿ç”¨<code>clearTimeout()</code>æ–¹æ³•æ¥å–æ¶ˆå®šæ—¶å™¨çš„æ‰§è¡Œã€‚</p><p>â€ƒâ€ƒéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒsetTimeoutå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œå‡½æ•°æˆ–ä»£ç ï¼Œè€Œæ˜¯åœ¨æŒ‡å®šçš„å»¶è¿Ÿæ—¶é—´åæ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œã€‚å¦‚æœå½“å‰çš„ä»£ç æ‰§è¡Œæ—¶é—´è¾ƒé•¿ï¼Œæˆ–è€…å­˜åœ¨å…¶ä»–çš„å»¶è¿Ÿæ“ä½œï¼Œé‚£ä¹ˆsetTimeoutä¸­çš„å‡½æ•°æˆ–ä»£ç å¯èƒ½ä¼šåœ¨é¢„æœŸçš„æ—¶é—´ä¹‹åæ‰è¢«æ‰§è¡Œã€‚</p><p><strong>ç¤ºä¾‹:</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">args</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(args)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setTimeout</span>(test,<span class="number">1000</span>,[<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;test1&#x27;</span>]);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="string">&#x27;test()&#x27;</span>,<span class="number">1000</span>,[<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;test1&#x27;</span>]);</span><br><span class="line"><span class="title function_">cleatTimeout</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="12-setinterval"><a class="markdownIt-Anchor" href="#12-setinterval"></a> 1.2. setInterval</h2><p>â€ƒâ€ƒ<strong>setIntervalæ˜¯JavaScriptä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”åé‡å¤æ‰§è¡Œä¸€æ®µä»£ç æˆ–å‡½æ•°ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”åï¼Œå°†ä»£ç æˆ–å‡½æ•°æ”¾å…¥JavaScriptçš„äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…å½“å‰ä»£ç æ‰§è¡Œå®Œæ¯•åå†æ‰§è¡Œã€‚</strong></p><p><strong>setIntervalçš„è¯­æ³•å¦‚ä¸‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>||<span class="string">&#x27;func()&#x27;</span>,delay,[args...])</span><br></pre></td></tr></table></figure><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ul class="lvl-0"><li class="lvl-2"><p><code>func|code</code>ï¼šè¦æ‰§è¡Œçš„å‡½æ•°æˆ–ä»£ç ã€‚</p></li><li class="lvl-2"><p><code>delay</code>ï¼šæ—¶é—´é—´éš”ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</p></li><li class="lvl-2"><p><code>arg1, arg2, ...</code>ï¼šå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ã€‚</p></li></ul><p>â€ƒâ€ƒå½“ä½¿ç”¨setIntervalæ—¶ï¼Œå®ƒå°†åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”åé‡å¤æ‰§è¡Œå‡½æ•°æˆ–ä»£ç ï¼Œç›´åˆ°è°ƒç”¨<code>clearInterval()</code>æ–¹æ³•æ¥åœæ­¢æ‰§è¡Œã€‚ä¸setTimeoutä¸åŒçš„æ˜¯ï¼ŒsetIntervalä¼šæŒç»­ä¸æ–­åœ°é‡å¤æ‰§è¡Œå‡½æ•°æˆ–ä»£ç ï¼Œç›´åˆ°è¢«æ˜ç¡®åœæ­¢ã€‚</p><p>â€ƒâ€ƒéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒsetIntervalå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œå‡½æ•°æˆ–ä»£ç ï¼Œè€Œæ˜¯åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”åæ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œã€‚å¦‚æœå½“å‰çš„ä»£ç æ‰§è¡Œæ—¶é—´è¾ƒé•¿ï¼Œæˆ–è€…å­˜åœ¨å…¶ä»–çš„å»¶è¿Ÿæ“ä½œï¼Œé‚£ä¹ˆsetIntervalä¸­çš„å‡½æ•°æˆ–ä»£ç å¯èƒ½ä¼šåœ¨é¢„æœŸçš„æ—¶é—´ä¹‹åæ‰è¢«æ‰§è¡Œã€‚</p><p><strong>ç¤ºä¾‹:</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">args</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(args)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setInterval</span>(test,<span class="number">1000</span>,[<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;test1&#x27;</span>]);</span><br><span class="line"><span class="built_in">setInterval</span>(<span class="string">&#x27;test()&#x27;</span>,<span class="number">1000</span>,[<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;test1&#x27;</span>]);</span><br><span class="line"><span class="built_in">clearInterval</span>();</span><br></pre></td></tr></table></figure><h2 id="13-requestanimationframe"><a class="markdownIt-Anchor" href="#13-requestanimationframe"></a> 1.3. requestAnimationFrame</h2><p>â€ƒâ€ƒ<strong>requestAnimationFrameæ˜¯WebåŠ¨ç”»APIçš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºåœ¨æµè§ˆå™¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰è°ƒç”¨æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œä»è€Œå®ç°å¹³æ»‘çš„åŠ¨ç”»æ•ˆæœã€‚ä¸setTimeoutå’ŒsetIntervalç›¸æ¯”ï¼ŒrequestAnimationFrameå…·æœ‰æ›´é«˜çš„æ€§èƒ½å’Œæ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</strong></p><p><strong>requestAnimationFrameçš„è¯­æ³•å¦‚ä¸‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">requestAnimationFrame</span>(callback);</span><br></pre></td></tr></table></figure><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ul class="lvl-0"><li class="lvl-2"><p><code>callback</code>ï¼šè¦æ‰§è¡Œçš„å›è°ƒå‡½æ•°ã€‚</p></li></ul><p>â€ƒâ€ƒå½“ä½¿ç”¨requestAnimationFrameæ—¶ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªå”¯ä¸€çš„IDï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªIDæ¥å–æ¶ˆåŠ¨ç”»å¸§çš„è°ƒç”¨ã€‚ä¸setTimeoutå’ŒsetIntervalä¸åŒçš„æ˜¯ï¼ŒrequestAnimationFrameçš„å›è°ƒå‡½æ•°å°†åœ¨æµè§ˆå™¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰æ‰§è¡Œï¼Œè€Œä¸æ˜¯ç®€å•åœ°ç­‰å¾…æŒ‡å®šçš„æ—¶é—´åæ‰§è¡Œã€‚è¿™æ ·å¯ä»¥å……åˆ†åˆ©ç”¨æµè§ˆå™¨çš„é‡ç»˜æœºåˆ¶ï¼Œå®ç°æ›´å¹³æ»‘çš„åŠ¨ç”»æ•ˆæœã€‚</p><p>â€ƒâ€ƒrequestAnimationFrameçš„ä¼˜åŠ¿åœ¨äºå®ƒèƒ½å¤Ÿæ ¹æ®æµè§ˆå™¨çš„åˆ·æ–°ç‡æ¥åŒæ­¥åŠ¨ç”»ï¼Œé¿å…äº†ç”±äºä¸åŒçš„å±å¹•åˆ·æ–°ç‡å’Œç¡¬ä»¶é…ç½®å¯¼è‡´çš„åŠ¨ç”»å¡é¡¿å’Œé—ªçƒã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿé¿å…äº†åœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­ä¸å¿…è¦çš„é‡ç»˜å’Œè®¡ç®—ï¼Œæé«˜äº†åŠ¨ç”»çš„æ€§èƒ½å’Œå“åº”æ€§ã€‚</p><p>â€ƒâ€ƒä½¿ç”¨requestAnimationFrameæ—¶éœ€è¦æ³¨æ„ï¼Œå®ƒåªä¼šåœ¨æµè§ˆå™¨å¤„äºæ¿€æ´»çŠ¶æ€æ—¶æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚å¦‚æœæµè§ˆå™¨å¤„äºæœ€å°åŒ–æˆ–éšè—çŠ¶æ€ï¼Œé‚£ä¹ˆå›è°ƒå‡½æ•°å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨requestAnimationFrameæ—¶ï¼Œéœ€è¦ç¡®ä¿æµè§ˆå™¨å¤„äºæ¿€æ´»çŠ¶æ€ï¼Œæˆ–è€…åœ¨å›è°ƒå‡½æ•°ä¸­æ·»åŠ é€‚å½“çš„é€»è¾‘æ¥å¤„ç†æµè§ˆå™¨ä¸å¤„äºæ¿€æ´»çŠ¶æ€çš„æƒ…å†µã€‚</p><p><strong>ç¤ºä¾‹:</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">frame</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;frame&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">requestAnimationFrame</span>(frame);</span><br></pre></td></tr></table></figure><h1 id="2-æ ‡ç­¾åŠ¨ç”»"><a class="markdownIt-Anchor" href="#2-æ ‡ç­¾åŠ¨ç”»"></a> 2. æ ‡ç­¾åŠ¨ç”»</h1><p>â€ƒâ€ƒä½¿ç”¨ <code>requestAnimationFrame</code> å¯ä»¥æ›¿ä»£ <code>setInterval</code> æ¥å®ç°å®šæ—¶ä»»åŠ¡ï¼Œå› ä¸º <code>requestAnimationFrame</code> æ›´åŠ é«˜æ•ˆï¼Œèƒ½å¤Ÿæ ¹æ®å±å¹•åˆ·æ–°ç‡æ¥åŒæ­¥åŠ¨ç”»ï¼Œé¿å…äº†ä¸å¿…è¦çš„é‡ç»˜å’Œè®¡ç®—ã€‚</p><p>ä¸‹é¢æ˜¯ä½¿ç”¨ <code>requestAnimationFrame</code> å®ç° <code>setInterval</code> æ›´æ–°<code>åšå®¢</code>- <a href="/tags">æ ‡ç­¾</a>çš„ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * å…¼å®¹ä¸æ”¯æŒrequestAnimationFrameçš„æµè§ˆå™¨</span></span><br><span class="line"><span class="comment"> ***/</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> ||</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> ||<span class="comment">/* Safari å’Œ Chrome */</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span> ||<span class="comment">/* Firefox */</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">oRequestAnimationFrame</span>      ||<span class="comment">/* Opera */</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span>     ||<span class="comment">/* IE 9 */</span></span><br><span class="line">    <span class="keyword">function</span> (<span class="params">callback</span>) &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(callback, <span class="number">6000</span> / <span class="number">60</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">cancelAnimationFrame</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="property">cancelAnimationFrame</span> ||</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">webkitCancelAnimationFrame</span> ||</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">mozCancelAnimationFrame</span> ||</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">oCancelAnimationFrame</span> ||</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">msCancelAnimationFrame</span> || <span class="built_in">clearTimeout</span></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¾ç½®ç²¾åº¦å®šæ—¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">function</span>&#125; å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125;   å»¶è¿Ÿæ—¶é—´</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;  å®šæ—¶å™¨ID</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">setIntervalPrecision</span>(<span class="params">callback, delay</span>) &#123;</span><br><span class="line">  <span class="comment">// ç”Ÿæˆå¹¶è®°å½•å®šæ—¶å™¨ID</span></span><br><span class="line">  <span class="keyword">let</span> obj = <span class="variable language_">window</span>.<span class="property">interValPrecisionObj</span> || (<span class="variable language_">window</span>.<span class="property">interValPrecisionObj</span> = &#123; <span class="attr">num</span>: <span class="number">0</span> &#125;)</span><br><span class="line">  obj.<span class="property">num</span>++</span><br><span class="line">  obj[<span class="string">&#x27;n&#x27;</span> + obj.<span class="property">num</span>] = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">var</span> intervalId = obj.<span class="property">num</span></span><br><span class="line">  <span class="comment">// å¼€å§‹æ—¶é—´</span></span><br><span class="line">  <span class="keyword">var</span> startTime = +<span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">  <span class="comment">// å·²æ‰§è¡Œæ¬¡æ•°</span></span><br><span class="line">  <span class="keyword">var</span> count = <span class="number">0</span></span><br><span class="line">  <span class="comment">// å»¶è¿Ÿæ—¶é—´</span></span><br><span class="line">  delay = delay || <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  ;(<span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// å®šæ—¶å™¨è¢«æ¸…é™¤ï¼Œåˆ™ç»ˆæ­¢</span></span><br><span class="line">    <span class="keyword">if</span> (!obj[<span class="string">&#x27;n&#x27;</span> + intervalId]) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ»¡è¶³æ¡ä»¶æ‰§è¡Œå›è°ƒ</span></span><br><span class="line">    <span class="keyword">if</span> (+<span class="keyword">new</span> <span class="title class_">Date</span>() &gt; startTime + delay * (count + <span class="number">1</span>)) &#123;</span><br><span class="line">      count++</span><br><span class="line">      <span class="title function_">callback</span>(count)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(loop)</span><br><span class="line">  &#125;)()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> intervalId</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¸…é™¤ç²¾åº¦å®šæ—¶å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; å®šæ—¶å™¨ID</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clearIntervalPrecision</span>(<span class="params">intervalId</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">interValPrecisionObj</span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">cancelAnimationFrame</span>(<span class="string">&#x27;n&#x27;</span> + intervalId)</span><br><span class="line">    <span class="keyword">delete</span> <span class="variable language_">window</span>.<span class="property">interValPrecisionObj</span>[<span class="string">&#x27;n&#x27;</span> + intervalId]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//loopHover è‡ªå·±çš„ä¸šåŠ¡å®ç°</span></span><br><span class="line">setIntervalPrecision(loopHover, <span class="number">100</span>)</span><br></pre></td></tr></table></figure></div><div class="article-category"><a class="article-category-link" href="/categories/%E5%B7%A5%E4%BD%9C/">å·¥ä½œ</a> <b>&nbsp;:åˆ†ç±»</b><br><a class="article-tag-none-link" href="/tags/javascript/" rel="tag">javascript</a>, <a class="article-tag-none-link" href="/tags/react/" rel="tag">react</a>, <a class="article-tag-none-link" href="/tags/requestAnimationFrame/" rel="tag">requestAnimationFrame</a>, <a class="article-tag-none-link" href="/tags/setInterval/" rel="tag">setInterval</a>, <a class="article-tag-none-link" href="/tags/setTimeout/" rel="tag">setTimeout</a>, <a class="article-tag-none-link" href="/tags/typescript/" rel="tag">typescript</a>, <a class="article-tag-none-link" href="/tags/vue/" rel="tag">vue</a> <b>&nbsp;:æ ‡ç­¾</b></div></div></article><nav id="article-nav" class="article-nav"><a href="/*/9ddcf808.html" id="article-nav-newer" class="article-nav-link-wrap newer"><strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong><div class="article-nav-title">éº»è¾£ç‚’è™¾å°¾ ğŸ¦</div></a><a href="/*/b2113df8.html" id="article-nav-older" class="article-nav-link-wrap older"><strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong><div class="article-nav-title">ç‚é”…é¢</div></a></nav><div id="gitalk-container" style="padding:0 30px 0 30px"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script type="text/javascript">var gitalk=new Gitalk({clientID:"d99a4bdc344cff33585d",clientSecret:"4819ca8aa103e688f259b5ed6b3cd3fffdf0f96e",repo:"yqwoe.github.io",owner:"yqwoe",admin:["yqwoe"],id:"3423146f",distractionFreeMode:"true",title:"å‰ç«¯å®šæ—¶å™¨",body:"ğŸš€"+location.href+"\n\næ¬¢è¿é€šè¿‡ issues ç•™è¨€ ï¼Œç›¸äº’äº¤æµå­¦ä¹ "});gitalk.render("gitalk-container")</script></div></div><div id="settings-container"><div id="dark-mode"></div><div id="sans-font"></div></div><span class="post-count">23.2k</span><script type="text/javascript">let d=document,r=d.documentElement.style,f=r.setProperty.bind(r),l=localStorage,s=l.getItem("s")||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=l.getItem("n"),m=d.getElementById("dark-mode"),b=()=>{f("--bg-color","#fafafa"),f("--code-bg-color","#f4f4f4"),f("--text-color","#212121"),f("--secondary-color","#808080"),f("--tertiary-color","#b0b0b0"),f("--link-color","#b5c8cf"),f("--link-hover-color","#618794"),f("--link-bg-color","#dae4e7"),f("--selection-color","#dae4e7")},c=()=>{f("--bg-color","#212121"),f("--code-bg-color","#292929"),f("--text-color","#fff"),f("--secondary-color","#c0c0c0"),f("--tertiary-color","#6e6e6e"),f("--link-color","#4d6b75"),f("--link-hover-color","#96b1bb"),f("--link-bg-color","#5d828e"),f("--selection-color","#acc1c9")},o=d.getElementById("sans-font"),e=()=>{f("--body-stack",'"Lora", "Georgia", "Times New Roman", serif')},g=()=>{f("--body-stack",'"Lato", "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", "Verdana", sans-serif')};m.onclick=function(){2==s?(s=1,l.setItem("s",s),c()):(s=2,l.setItem("s",s),b())},o.onclick=function(){2==n?(n=1,l.setItem("n",n),g()):(n=2,l.setItem("n",n),e())},(s||"1"==s)&&(s=1,l.setItem("s",s),c()),s&&"2"!=s||(s=2,l.setItem("s",s),b()),n||(n=2,l.setItem("n",2)),"1"==n&&g(),"2"==n&&e()</script><script type="module">import mermaid from"https://cdn.jsdelivr.net/npm/mermaid@9.4.3/+esm";let theme=localStorage.getItem("s");mermaid.initialize({startOnLoad:!0,logLevel:"debug",theme:"2"===theme?"forest":"dark"});let mode=document.getElementById("dark-mode"),arrayGraphs=[],nodes=document.getElementsByClassName("mermaid");for(let e of nodes)console.log(e.innerHTML),arrayGraphs.push(e.innerHTML);mode.addEventListener("click",async()=>{theme=localStorage.getItem("s"),mermaid.initialize({startOnLoad:!0,logLevel:"debug",theme:"2"===theme?"forest":"dark"});for(let e=0;e<nodes.length;e++){let t=nodes[e];t.removeAttribute("data-processed"),t.setAttribute("id","mermaid-"+e),t.replaceChildren(),t.innerHTML=arrayGraphs[e],mermaid.init(void 0,t)}},!1)</script><script src="/js/jquery.min.js" defer></script><script src="/js/jquery.qrcode.min.js" defer></script><script type="module">import qrcodeInit from"/js/qrcode.js";qrcodeInit()</script><script type="module">window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,100)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout</script><script type="module">function get_poem(e,n){var t=document.querySelector(e),o=document.querySelector(n),i=new XMLHttpRequest;i.open("get","https://v2.jinrishici.com/one.json?client=browser-sdk/1.2"),i.withCredentials=!0,i.onreadystatechange=function(){if(4===i.readyState){var e=JSON.parse(i.responseText);t.innerHTML=e.data.content,o.innerHTML="["+e.data.origin.dynasty+"] "+e.data.origin.author+"ã€Š"+e.data.origin.title+"ã€‹"}},i.send()}function modifySubmitBtn(){var e=$(".hbe-button"),n=$("#hbePass");e.length>0&&e.text("é‡æ–°è¾“å…¥å¯†ç "),n.length>0&&n.attr("autocomplete","false")}function layoutTagCloud(){}function loopHover(){var e=$(".tagcloud a"),n=$('.tagcloud a[class="tag-hover"]'),t=Math.round(Math.random()*(e.length-1));if(t<0&&(t=0),t>e.length&&(t=e.length-1),e.length){if(n.length)for(let e=0;e<n.length;e++)n[e].classList="";e[t].classList="tag-hover"}}function setIntervalPrecision(e,n){let t=window.interValPrecisionObj||(window.interValPrecisionObj={num:0});t.num++,t["n"+t.num]=!0;var o=t.num,i=+new Date,a=0;return n=n||0,function r(){t["n"+o]&&(+new Date>i+n*(a+1)&&(a++,e(a)),window.requestAnimationFrame(r))}(),o}function clearIntervalPrecision(e){window.interValPrecisionObj&&(window.cancelAnimationFrame("n"+e),delete window.interValPrecisionObj["n"+e])}$("div").hasClass("poem-wrap")&&get_poem("#poem","#info"),modifySubmitBtn(),setIntervalPrecision(loopHover,100),window.revealLoading=revealLoading</script></body></html>